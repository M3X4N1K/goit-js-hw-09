{"version":3,"file":"2-form.js","sources":["../src/js/2-form.js"],"sourcesContent":["const form = document.querySelector('.feedback-form');\nconst STORAGE_KEY = 'feedback-form-state';\n\nlet formData = {\n  email: '',\n  message: '',\n};\n\n// --- helpers ---\nconst debounce = (fn, delay = 300) => {\n  let t;\n  return (...args) => {\n    clearTimeout(t);\n    t = setTimeout(() => fn(...args), delay);\n  };\n};\n\nconst safeGet = (key) => {\n  try {\n    return localStorage.getItem(key);\n  } catch {\n    return null;\n  }\n};\n\nconst safeSet = (key, value) => {\n  try {\n    localStorage.setItem(key, value);\n  } catch {}\n};\n\nconst safeRemove = (key) => {\n  try {\n    localStorage.removeItem(key);\n  } catch {}\n};\n\n// --- restore state from localStorage ---\nfunction restoreFormState() {\n  const raw = safeGet(STORAGE_KEY);\n  if (!raw) return;\n\n  try {\n    const data = JSON.parse(raw);\n    if (typeof data === 'object' && data) {\n      formData.email = typeof data.email === 'string' ? data.email : '';\n      formData.message = typeof data.message === 'string' ? data.message : '';\n\n      form.elements.email.value = formData.email;\n      form.elements.message.value = formData.message;\n    }\n  } catch {\n    safeRemove(STORAGE_KEY);\n  }\n}\n\n// --- save state (debounced) ---\nconst saveStateDebounced = debounce(() => {\n  safeSet(STORAGE_KEY, JSON.stringify(formData));\n}, 300);\n\n// --- bind events ---\nif (form) {\n  restoreFormState();\n\n  form.addEventListener('input', (e) => {\n    const { name, value } = e.target;\n    if (!(name in formData)) return;\n\n    formData[name] = value.trim();\n    saveStateDebounced();\n  });\n\n  form.addEventListener('submit', (e) => {\n    e.preventDefault();\n\n    if (!formData.email || !formData.message) {\n      alert('Fill please all fields');\n      return;\n    }\n\n    // ✅ Виводимо саме глобальний formData\n    console.log(formData);\n\n    // очищення\n    form.reset();\n    safeRemove(STORAGE_KEY);\n    formData.email = '';\n    formData.message = '';\n  });\n\n  form.addEventListener('reset', () => {\n    safeRemove(STORAGE_KEY);\n    formData.email = '';\n    formData.message = '';\n  });\n}"],"names":["form","STORAGE_KEY","formData","debounce","fn","delay","t","args","safeGet","key","safeSet","value","safeRemove","restoreFormState","raw","data","saveStateDebounced","name"],"mappings":"wFAAA,MAAMA,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAc,sBAEpB,IAAIC,EAAW,CACb,MAAO,GACP,QAAS,EACX,EAGA,MAAMC,EAAW,CAACC,EAAIC,EAAQ,MAAQ,CACpC,IAAIC,EACJ,MAAO,IAAIC,IAAS,CAClB,aAAaD,CAAC,EACdA,EAAI,WAAW,IAAMF,EAAG,GAAGG,CAAI,EAAGF,CAAK,CAC3C,CACA,EAEMG,EAAWC,GAAQ,CACvB,GAAI,CACF,OAAO,aAAa,QAAQA,CAAG,CACnC,MAAU,CACN,OAAO,IACR,CACH,EAEMC,EAAU,CAACD,EAAKE,IAAU,CAC9B,GAAI,CACF,aAAa,QAAQF,EAAKE,CAAK,CAChC,MAAO,CAAE,CACZ,EAEMC,EAAcH,GAAQ,CAC1B,GAAI,CACF,aAAa,WAAWA,CAAG,CAC5B,MAAO,CAAE,CACZ,EAGA,SAASI,GAAmB,CAC1B,MAAMC,EAAMN,EAAQP,CAAW,EAC/B,GAAKa,EAEL,GAAI,CACF,MAAMC,EAAO,KAAK,MAAMD,CAAG,EACvB,OAAOC,GAAS,UAAYA,IAC9Bb,EAAS,MAAQ,OAAOa,EAAK,OAAU,SAAWA,EAAK,MAAQ,GAC/Db,EAAS,QAAU,OAAOa,EAAK,SAAY,SAAWA,EAAK,QAAU,GAErEf,EAAK,SAAS,MAAM,MAAQE,EAAS,MACrCF,EAAK,SAAS,QAAQ,MAAQE,EAAS,QAE7C,MAAU,CACNU,EAAWX,CAAW,CACvB,CACH,CAGA,MAAMe,EAAqBb,EAAS,IAAM,CACxCO,EAAQT,EAAa,KAAK,UAAUC,CAAQ,CAAC,CAC/C,EAAG,GAAG,EAGFF,IACFa,IAEAb,EAAK,iBAAiB,QAAU,GAAM,CACpC,KAAM,CAAE,KAAAiB,EAAM,MAAAN,GAAU,EAAE,OACpBM,KAAQf,IAEdA,EAASe,CAAI,EAAIN,EAAM,KAAI,EAC3BK,IACJ,CAAG,EAEDhB,EAAK,iBAAiB,SAAW,GAAM,CAGrC,GAFA,EAAE,eAAc,EAEZ,CAACE,EAAS,OAAS,CAACA,EAAS,QAAS,CACxC,MAAM,wBAAwB,EAC9B,MACD,CAGD,QAAQ,IAAIA,CAAQ,EAGpBF,EAAK,MAAK,EACVY,EAAWX,CAAW,EACtBC,EAAS,MAAQ,GACjBA,EAAS,QAAU,EACvB,CAAG,EAEDF,EAAK,iBAAiB,QAAS,IAAM,CACnCY,EAAWX,CAAW,EACtBC,EAAS,MAAQ,GACjBA,EAAS,QAAU,EACvB,CAAG"}