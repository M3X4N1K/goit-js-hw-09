{"version":3,"file":"2-form.js","sources":["../src/js/2-form.js"],"sourcesContent":["console.log('Form');\n\nconst form = document.querySelector('.feedback-form');\nconst STORAGE_KEY = 'feedback-form-state';\n\nlet formData = {\n  email: '',\n  message: '',\n};\n\n\nconst debounce = (fn, delay = 300) => {\n  let t;\n  return (...args) => {\n    clearTimeout(t);\n    t = setTimeout(() => fn(...args), delay);\n  };\n};\n\nconst safeGet = (key) => {\n  try {\n    return localStorage.getItem(key);\n  } catch {\n    return null;\n  }\n};\n\nconst safeSet = (key, value) => {\n  try {\n    localStorage.setItem(key, value);\n  } catch {\n    \n  }\n};\n\nconst safeRemove = (key) => {\n  try {\n    localStorage.removeItem(key);\n  } catch {\n    // ignore\n  }\n};\n\nconst isValidEmail = (email) => {\n  \n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n};\n\n\nfunction restoreFormState() {\n  const raw = safeGet(STORAGE_KEY);\n  if (!raw) return;\n\n  try {\n    const data = JSON.parse(raw);\n    if (typeof data === 'object' && data) {\n      formData.email = typeof data.email === 'string' ? data.email : '';\n      formData.message = typeof data.message === 'string' ? data.message : '';\n\n      const emailInput = form.querySelector('input[name=\"email\"]');\n      const messageTextarea = form.querySelector('textarea[name=\"message\"]');\n\n      if (emailInput) emailInput.value = formData.email;\n      if (messageTextarea) messageTextarea.value = formData.message;\n    }\n  } catch {\n   \n    safeRemove(STORAGE_KEY);\n  }\n}\n\n\nconst saveStateDebounced = debounce(() => {\n  safeSet(STORAGE_KEY, JSON.stringify(formData));\n}, 300);\n\n\nif (form) {\n  restoreFormState();\n\n  form.addEventListener('input', (e) => {\n    const target = e.target;\n    if (!target || !target.name) return;\n\n    if (target.name in formData) {\n      formData[target.name] = target.value;\n      saveStateDebounced();\n    }\n  });\n\n  form.addEventListener('submit', (e) => {\n    e.preventDefault();\n\n    const emailInput = form.querySelector('input[name=\"email\"]');\n    const messageTextarea = form.querySelector('textarea[name=\"message\"]');\n\n    const email = (emailInput?.value || '').trim();\n    const message = (messageTextarea?.value || '').trim();\n\n    if (!email || !message) {\n      alert('Будь ласка, заповніть і Email, і Message.');\n      if (!email) emailInput?.focus();\n      else messageTextarea?.focus();\n      return;\n    }\n\n    if (!isValidEmail(email)) {\n      alert('Будь ласка, вкажіть коректний email.');\n      emailInput?.focus();\n      return;\n    }\n\n   \n    console.log('Submitted data:', { email, message });\n\n \n    form.reset();\n    safeRemove(STORAGE_KEY);\n    formData = { email: '', message: '' };\n  });\n\n\n  form.addEventListener('reset', () => {\n    safeRemove(STORAGE_KEY);\n    formData = { email: '', message: '' };\n  });\n}"],"names":["form","STORAGE_KEY","formData","debounce","fn","delay","t","args","safeGet","key","safeSet","value","safeRemove","isValidEmail","email","restoreFormState","raw","data","emailInput","messageTextarea","saveStateDebounced","e","target","message"],"mappings":"wFAAA,QAAQ,IAAI,MAAM,EAElB,MAAMA,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAc,sBAEpB,IAAIC,EAAW,CACb,MAAO,GACP,QAAS,EACX,EAGA,MAAMC,EAAW,CAACC,EAAIC,EAAQ,MAAQ,CACpC,IAAIC,EACJ,MAAO,IAAIC,IAAS,CAClB,aAAaD,CAAC,EACdA,EAAI,WAAW,IAAMF,EAAG,GAAGG,CAAI,EAAGF,CAAK,CAC3C,CACA,EAEMG,EAAWC,GAAQ,CACvB,GAAI,CACF,OAAO,aAAa,QAAQA,CAAG,CACnC,MAAU,CACN,OAAO,IACR,CACH,EAEMC,EAAU,CAACD,EAAKE,IAAU,CAC9B,GAAI,CACF,aAAa,QAAQF,EAAKE,CAAK,CACnC,MAAU,CAEP,CACH,EAEMC,EAAcH,GAAQ,CAC1B,GAAI,CACF,aAAa,WAAWA,CAAG,CAC/B,MAAU,CAEP,CACH,EAEMI,EAAgBC,GAEb,6BAA6B,KAAKA,CAAK,EAIhD,SAASC,GAAmB,CAC1B,MAAMC,EAAMR,EAAQP,CAAW,EAC/B,GAAKe,EAEL,GAAI,CACF,MAAMC,EAAO,KAAK,MAAMD,CAAG,EAC3B,GAAI,OAAOC,GAAS,UAAYA,EAAM,CACpCf,EAAS,MAAQ,OAAOe,EAAK,OAAU,SAAWA,EAAK,MAAQ,GAC/Df,EAAS,QAAU,OAAOe,EAAK,SAAY,SAAWA,EAAK,QAAU,GAErE,MAAMC,EAAalB,EAAK,cAAc,qBAAqB,EACrDmB,EAAkBnB,EAAK,cAAc,0BAA0B,EAEjEkB,IAAYA,EAAW,MAAQhB,EAAS,OACxCiB,IAAiBA,EAAgB,MAAQjB,EAAS,QACvD,CACL,MAAU,CAENU,EAAWX,CAAW,CACvB,CACH,CAGA,MAAMmB,EAAqBjB,EAAS,IAAM,CACxCO,EAAQT,EAAa,KAAK,UAAUC,CAAQ,CAAC,CAC/C,EAAG,GAAG,EAGFF,IACFe,IAEAf,EAAK,iBAAiB,QAAUqB,GAAM,CACpC,MAAMC,EAASD,EAAE,OACb,CAACC,GAAU,CAACA,EAAO,MAEnBA,EAAO,QAAQpB,IACjBA,EAASoB,EAAO,IAAI,EAAIA,EAAO,MAC/BF,IAEN,CAAG,EAEDpB,EAAK,iBAAiB,SAAWqB,GAAM,CACrCA,EAAE,eAAc,EAEhB,MAAMH,EAAalB,EAAK,cAAc,qBAAqB,EACrDmB,EAAkBnB,EAAK,cAAc,0BAA0B,EAE/Dc,IAASI,GAAA,YAAAA,EAAY,QAAS,IAAI,KAAI,EACtCK,IAAWJ,GAAA,YAAAA,EAAiB,QAAS,IAAI,KAAI,EAEnD,GAAI,CAACL,GAAS,CAACS,EAAS,CACtB,MAAM,2CAA2C,EAC5CT,EACAK,GAAA,MAAAA,EAAiB,QADVD,GAAA,MAAAA,EAAY,QAExB,MACD,CAED,GAAI,CAACL,EAAaC,CAAK,EAAG,CACxB,MAAM,sCAAsC,EAC5CI,GAAA,MAAAA,EAAY,QACZ,MACD,CAGD,QAAQ,IAAI,kBAAmB,CAAE,MAAAJ,EAAO,QAAAS,CAAS,CAAA,EAGjDvB,EAAK,MAAK,EACVY,EAAWX,CAAW,EACtBC,EAAW,CAAE,MAAO,GAAI,QAAS,EAAE,CACvC,CAAG,EAGDF,EAAK,iBAAiB,QAAS,IAAM,CACnCY,EAAWX,CAAW,EACtBC,EAAW,CAAE,MAAO,GAAI,QAAS,EAAE,CACvC,CAAG"}